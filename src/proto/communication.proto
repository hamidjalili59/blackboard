syntax = "proto3";

package communication;

// پیام اصلی که از کلاینت به سرور ارسال می‌شود.
// از oneof برای اطمینان از ارسال تنها یکی از انواع پیام در هر بار استفاده می‌شود.
message ClientToServer {
  oneof payload {
    CanvasCommand canvas_command = 1;
    AudioChunk audio_chunk = 2;
  }
}

// یک دستور نقاشی روی canvas را نمایش می‌دهد.
message CanvasCommand {
  // دستور نقاشی، برای مثال در قالب یک رشته JSON.
  string command_json = 1;
  // زمان ایجاد دستور به میلی‌ثانیه از مبدا یونیکس.
  int64 timestamp_ms = 2;
}

// یک قطعه از داده صوتی را نمایش می‌دهد.
message AudioChunk {
  // داده خام صوتی.
  bytes data = 1;
  // شماره ترتیب برای مرتب‌سازی قطعات صوتی.
  int64 sequence = 2;
}
